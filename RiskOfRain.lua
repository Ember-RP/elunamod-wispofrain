-- Description:
-- When a user kills a creature, they have CHANCE_TO_SPAWN_WISP / MAX_CHANCE chance to spawn a wisp, provided they have the RISK_OF_RAIN spell. 
-- WISP_ENTRY will autocast from SPELL_ARRAY until killed or WISP_DURATION seconds have passed.
-- If the killer or any party members have RISK_OF_RAIN_MOD_HARDMODE, then SHIELD_SPELL is on WISP_ENTRY until interrupted or stunned.
-- If WISP_ENTRY is killed, then killer and party members will receive a random ID from BUFF_ARRAY / DEBUFF_ARRAY.
-- As the buff is distributed, if RISK_OF_RAIN_MOD_NODEBUFFS is held by the unit, then that unit will only receive buffs.
-- Author: grimreapaa

-- SQL FOR EVERYTHING STARTS HERE. PUT INTO WORLD DB.
--[[
REPLACE INTO `item_template` VALUES (1899997, 9, 0, -1, 'Wisp of Rain : Wisp Buff', 3019, 1, 64, 0, 1, 1, 1, 0, -1, -1, 0, 0, 0, 0, 3000017, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 483, 0, -1, 0, -1, 0, -1, 3000022, 6, 0, 0, -1, 0, -1, 0, 0, 0, 0, -1, 0, -1, 0, 0, 0, 0, -1, 0, -1, 0, 0, 0, 0, -1, 0, -1, 0, 'Starting at level 10, the wisp can only be damaged when crowd controlled. Occurs regardless of other party member settings.\r\nOnly useable at Level 1.', 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1, 0, 0, 0, 0, '', 0, 0, 0, 0, 0, 12340);
REPLACE INTO `item_template` VALUES (1899998, 9, 0, -1, 'Wisp of Rain', 3019, 1, 64, 0, 1, 1, 1, 0, -1, -1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 483, 0, -1, 0, -1, 0, -1, 3000017, 6, 0, 0, -1, 0, -1, 0, 0, 0, 0, -1, 0, -1, 0, 0, 0, 0, -1, 0, -1, 0, 0, 0, 0, -1, 0, -1, 0, 'Slain enemies have a 1% chance to spawn a wisp. The wisp autocasts AoE abilities. Killing the wisp awards other Wisp of Rain carriers in your party with a random buff or debuff.\r\nOnly useable at Level 1.', 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1, 0, 0, 0, 0, '', 0, 0, 0, 0, 0, 12340);
REPLACE INTO `item_template` VALUES (1899999, 9, 0, -1, 'Wisp of Rain : No Debuffs', 3019, 1, 64, 0, 1, 1, 1, 0, -1, -1, 0, 0, 0, 0, 3000017, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 483, 0, -1, 0, -1, 0, -1, 3000021, 6, 0, 0, -1, 0, -1, 0, 0, 0, 0, -1, 0, -1, 0, 0, 0, 0, -1, 0, -1, 0, 0, 0, 0, -1, 0, -1, 0, 'The wisp no longer drops debuffs.\r\nOnly useable at Level 1.', 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1, 0, 0, 0, 0, '', 0, 0, 0, 0, 0, 12340);
REPLACE INTO `creature_template` VALUES (4000001, 0, 0, 0, 0, 0, 10045, 0, 0, 0, 'Hooded Figure', 'Run Modifiers', NULL, 65534, 80, 80, 0, 35, 129, 1, 1.14286, 1, 1, 18, 1, 0, 0, 1, 2000, 2000, 1, 1, 1, 512, 2048, 0, 0, 0, 0, 0, 0, 7, 134217728, 0, 0, 0, 0, 0, 0, 0, '', 0, 1, 1.05, 1, 1, 1, 0, 0, 1, 0, 0, 2, '', 12340);
REPLACE INTO `creature_template` VALUES (4000000, 0, 0, 0, 0, 0, 10045, 0, 0, 0, 'Wisp', 'Wisp of Rain', NULL, 0, 1, 80, 0, 14, 0, 1, 1.14286, 1, 1, 20, 1, 0, 0, 1, 2000, 2000, 1, 1, 1, 0, 2048, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, '', 0, 1, 0.01, 1, 0, 0, 0, 0, 1, 0, 0, 64, '', 12340);
REPLACE INTO `gossip_menu` VALUES (65534, 99999);
REPLACE INTO `npc_text` VALUES (99999, 'Greetings, $n.', NULL, 0, 0, 0, 0, 0, 0, 0, 0, 0, NULL, NULL, 0, 0, 0, 0, 0, 0, 0, 0, 0, NULL, NULL, 0, 0, 0, 0, 0, 0, 0, 0, 0, NULL, NULL, 0, 0, 0, 0, 0, 0, 0, 0, 0, NULL, NULL, 0, 0, 0, 0, 0, 0, 0, 0, 0, NULL, NULL, 0, 0, 0, 0, 0, 0, 0, 0, 0, NULL, NULL, 0, 0, 0, 0, 0, 0, 0, 0, 0, NULL, NULL, 0, 0, 0, 0, 0, 0, 0, 0, 0, NULL);
REPLACE INTO `gossip_menu_option` VALUES (65534, 0, 1, 'Wisp of Rain', 0, 3, 128, 2000001, 0, 0, 0, NULL, 0, NULL);
REPLACE INTO `npc_vendor` VALUES (2000001, 0, 1899999, 0, 0, 0, NULL);
REPLACE INTO `npc_vendor` VALUES (2000001, 0, 1899998, 0, 0, 0, NULL);
REPLACE INTO `npc_vendor` VALUES (2000001, 0, 1899997, 0, 0, 0, NULL);
--]]
-- SQL ENDS
-- SPELL.DBC STUFF STARTS HERE. ENTER IT INTO SQL. HOPEFULLY YOU ALREADY HAVE YOUR SPELL.DBC IMPORTED INTO YOUR DB VIA STONEHARRYS SPELLEDITOR OR WDBX EDITOR
--[[
INSERT INTO `db_Spell_12340` VALUES (3000000,0,0,0,2147483648,0,0,1048576,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,200,291,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3037,0,0,"Experience Bonus","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Experience gained from killing monsters and completing quests increased by $s1%.","","","","","","","","","","","","","","","",16712190,"Experience gained from killing monsters and completing quests increased by $s1%.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000001,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,6,1,1,1,0,0,0,-1,0,-1,0,0,0,1,1,1,0,0,0,0,0,0,133,79,136,0,0,0,0,0,0,0,0,0,0,0,0,0,127,127,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1704,0,0,"Damage Buff","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Physical and Spell Damage increased by $s2%.","","","","","","","","","","","","","","","",16712190,"Physical and Spell Damage increased by $s2%.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000002,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,1,1,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,138,140,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,0,0,"Attack Speed","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Attack speed increased by $s1%.","","","","","","","","","","","","","","","",16712190,"Attack speed increased by $s1%.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000003,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,1,1,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,65,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1552,0,0,"Spell Haste","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Cast speed increased by $s1%.","","","","","","","","","","","","","","","",16712190,"Cast speed increased by $s1%.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000004,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,99,0,0,0,0,0,1,0,0,0,0,0,0,0,0,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Increased Armor","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Armor increased by $s1.","","","","","","","","","","","","","","","",16712190,"Armor increased by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000005,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,189,0,0,0,0,0,0,0,0,0,0,0,0,0,0,224,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Increased Hit","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Increases your hit rating by $s1.","","","","","","","","","","","","","","","",16712190,"Increases your hit rating by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000006,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Increased Strength","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Strength increased by $s1.","","","","","","","","","","","","","","","",16712190,"Strength increased by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000007,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Increased Agility","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Agility increased by $s1.","","","","","","","","","","","","","","","",16712190,"Agility increased by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000008,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Increased Stamina","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Stamina increased by $s1.","","","","","","","","","","","","","","","",16712190,"Stamina increased by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000009,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Increased Intellect","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Intellect increased by $s1.","","","","","","","","","","","","","","","",16712190,"Intellect increased by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000010,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Increased Spirit","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Spirit increased by $s1.","","","","","","","","","","","","","","","",16712190,"Spirit increased by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000012,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,126,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Increased Resistances","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"All resistances increased by $s1.","","","","","","","","","","","","","","","",16712190,"All resistances increased by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000013,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,6,1,1,1,0,0,0,-1,-1,0,0,0,0,1,1,1,0,0,0,0,0,0,133,79,136,0,0,0,0,0,0,0,0,0,0,0,0,0,127,127,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1704,0,0,"Outgoing Healing Buff","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Outgoing healing increased by $s3%.","","","","","","","","","","","","","","","",16712190,"Outgoing healing increased by $s3%.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000014,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,6,1,1,1,0,0,0,0,-1,-1,0,0,0,1,1,1,0,0,0,0,0,0,133,79,136,0,0,0,0,0,0,0,0,0,0,0,0,0,127,127,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1704,0,0,"Health Buff","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Maximum Health increased by $s1%.","","","","","","","","","","","","","","","",16712190,"Maximum Health increased by $s1%.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000016,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,1.25,1.25,0,-1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,126,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Increased Spell Damage","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Spell damage increased by 1.25 per level per stack.","","","","","","","","","","","","","","","",16712190,"Spell damage increased by 1.25 per level per stack.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000017,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Slain enemies have a 1% chance to spawn a wisp. The wisp autocasts AoE abilities. Killing the wisp awards other Wisp of Rain carriers in your party with a random buff or debuff.","","","","","","","","","","","","","","","",16712190,"Slain enemies have a 1% chance to spawn a wisp. The wisp autocasts AoE abilities. Killing the wisp awards other Wisp of Rain carriers in your party with a random buff or debuff.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000018,0,0,0,65536,136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,8,0,0,0,101,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,2,0,0,1,0,0,30,0,0,-1,0,0,0,0,0,22,0,0,15,0,0,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,965,0,122,0,0,"Arcane Explosion","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Causes an explosion of arcane magic around the caster, causing 30 Arcane damage per level to all targets within $a1 yards.","","","","","","","","","","","","","","","",16712190,"Causes an explosion of arcane magic around the caster, causing 30 Arcane damage per level to all targets within $a1 yards.","","","","","","","","","","","","","","","",16712190,0,133,1500,0,3,4096,0,0,0,1,1,0,1,1,1,0,0,0,0,0,0,64,0,0,0,0.166,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000020,0,0,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6788,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,9999999,0,0,0,0,0,1,0,0,0,0,0,0,0,0,69,0,0,0,0,0,0,0,0,0,0,0,0,0,0,127,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,784,0,566,0,0,"Wisp Shield","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"All damage absorbed until interrupted or stunned.","","","","","","","","","","","","","","","",16712190,"All damage absorbed until interrupted or stunned.","","","","","","","","","","","","","","","",16712190,0,0,0,0,6,1,0,1024,0,1,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000021,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Wisp of Rain : No Debuffs","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"The wisp no longer drops negative counterparts for you. Requires Wisp of Rain.","","","","","","","","","","","","","","","",16712190,"The wisp no longer drops negative counterparts for you. Requires Wisp of Rain.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000022,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Wisp of Rain : Wisp Buff","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"The wisp now has a shield and can only be damaged when it is stunned, silenced, or interrupted. Will apply regardless if anyone else in your party has this. Requires Wisp of Rain.","","","","","","","","","","","","","","","",16712190,"The wisp now has a shield and can only be damaged when it is stunned, silenced, or interrupted. Will apply regardless if anyone else in your party has this. Requires Wisp of Rain.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000023,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,189,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1792,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Increased Critical Strike","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Increases your critical strike rating by $s1.","","","","","","","","","","","","","","","",16712190,"Increases your critical strike rating by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000024,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,110,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Power Regeneration","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Mana, Rage, or Energy generation increased by %$s1.","","","","","","","","","","","","","","","",16712190,"Mana, Rage, or Energy generation increased by %$s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000025,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,189,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8388608,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1704,0,0,"Increased Expertise Rating","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Increases expertise rating by $s1.","","","","","","","","","","","","","","","",16712190,"Increases expertise rating by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000026,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,1,1,0,0,0,0,0,39,0,0,0,0,1,1,0,0,0,0,0,0,0,99,124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Increased Attack Power","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Increases attack power by $s1.","","","","","","","","","","","","","","","",16712190,"Increases attack power by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000027,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,189,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Increased Defense","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Increases defense rating by $s1.","","","","","","","","","","","","","","","",16712190,"Increases defense rating by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000028,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,189,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2156,0,0,"Increased Dodge","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Increases your dodge rating by $s1.","","","","","","","","","","","","","","","",16712190,"Increases your dodge rating by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000029,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,189,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Increased Parry","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Increases your parry rating by $s1.","","","","","","","","","","","","","","","",16712190,"Increases your parry rating by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000030,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,189,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Increased Block","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Increases your block rating by $s1.","","","","","","","","","","","","","","","",16712190,"Increases your block rating by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000031,0,0,0,2147483648,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,189,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114688,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Increased Resilience","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"+$s1 Resilience Rating.","","","","","","","","","","","","","","","",16712190,"+$s1 Resilience Rating.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000032,0,0,0,2147483840,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Level Any Dungeon Dummy Effect","","","","","","","","","","","","","","","",16712190,"","","","","","","","","","","","","","","","",16712190,"","","","","","","","","","","","","","","","",16712190,"","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000033,0,0,0,2214592512,0,0,1048576,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,1,1,0,0,0,0,-2,-2,0,0,0,0,1,1,0,0,0,0,0,0,0,200,291,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3037,0,0,"Experience","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Experience gained from killing monsters and completing quests reduced by $s1%.","","","","","","","","","","","","","","","",16712190,"Experience gained from killing monsters and completing quests reduced by $s1%.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000034,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,0,6,0,0,1,0,0,0,0,0,-2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,79,0,0,0,0,0,0,0,0,0,0,0,0,0,0,127,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1704,0,0,"Damage","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Physical and Spell Damage reduced by $s2%.","","","","","","","","","","","","","","","",16712190,"Physical and Spell Damage reduced by $s2%.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000035,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,1,1,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,1,1,0,0,0,0,0,-2,0,0,0,0,1,0,0,0,0,0,0,0,0,193,65,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,0,0,"Attack Speed","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Attack speed reduced by $s1%.","","","","","","","","","","","","","","","",16712190,"Attack speed reduced by $s1%.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,1,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000036,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,1,1,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,-2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,65,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1552,0,0,"Spell Haste","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Cast speed reduced by $s1%.","","","","","","","","","","","","","","","",16712190,"Cast speed reduced by $s1%.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000037,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,-101,0,0,0,0,0,1,0,0,0,0,0,0,0,0,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Armor","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Armor reduced by $s1.","","","","","","","","","","","","","","","",16712190,"Armor reduced by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000038,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,-2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,189,0,0,0,0,0,0,0,0,0,0,0,0,0,0,224,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Hit","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Reduces your hit rating by $s1.","","","","","","","","","","","","","","","",16712190,"Reduces your hit rating by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000039,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,-2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Strength","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Strength reduced by $s1.","","","","","","","","","","","","","","","",16712190,"Strength reduced by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000040,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,-2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Agility","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Agility reduced by $s1.","","","","","","","","","","","","","","","",16712190,"Agility reduced by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000041,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,-2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Stamina","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Stamina reduced by $s1.","","","","","","","","","","","","","","","",16712190,"Stamina reduced by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000042,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,-2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Intellect","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Intellect reduced by $s1.","","","","","","","","","","","","","","","",16712190,"Intellect reduced by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000043,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,-2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Spirit","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Spirit reduced by $s1.","","","","","","","","","","","","","","","",16712190,"Spirit reduced by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000044,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,-2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,126,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Resistances","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"All resistances reduced by $s1.","","","","","","","","","","","","","","","",16712190,"All resistances reduced by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000045,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,0,0,6,0,0,1,0,0,0,0,0,-2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,127,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1704,0,0,"Outgoing Healing","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Outgoing healing reduced by $s3%.","","","","","","","","","","","","","","","",16712190,"Outgoing healing reduced by $s3%.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000046,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,-2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,133,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1704,0,0,"Health","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Maximum Health reduced by $s1%.","","","","","","","","","","","","","","","",16712190,"Maximum Health reduced by $s1%.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000047,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,-1.25,1.25,0,-1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,126,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Spell Damage","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Spell damage reduced by 1.25 per level per stack.","","","","","","","","","","","","","","","",16712190,"Spell damage reduced by 1.25 per level per stack.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000048,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,1,1,0,0,0,0,-2,-2,0,0,0,0,1,1,0,0,0,0,0,0,0,52,57,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Critical Strike","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Reduces your critical strike rating by $s1.","","","","","","","","","","","","","","","",16712190,"Reduces your critical strike rating by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000049,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,-2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,110,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Power Regeneration","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Mana, Rage, or Energy generation reduced by %$s1.","","","","","","","","","","","","","","","",16712190,"Mana, Rage, or Energy generation reduced by %$s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000050,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,-2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,189,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8388608,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1704,0,0,"Expertise Rating","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Reduces expertise rating by $s1.","","","","","","","","","","","","","","","",16712190,"Reduces expertise rating by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000051,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,6,0,1,1,0,0,0,0,-2,39,0,0,0,0,1,1,0,0,0,0,0,0,0,99,124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Attack Power","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Reduces attack power by $s1.","","","","","","","","","","","","","","","",16712190,"Reduces attack power by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000052,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,-2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,189,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Defense","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Reduces defense rating by $s1.","","","","","","","","","","","","","","","",16712190,"Reduces defense rating by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000053,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,-2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,49,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2156,0,0,"Dodge","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Reduces your dodge rating by $s1.","","","","","","","","","","","","","","","",16712190,"Reduces your dodge rating by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000054,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,-2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Parry","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Reduces your parry rating by $s1.","","","","","","","","","","","","","","","",16712190,"Reduces your parry rating by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000055,0,0,0,2214592512,0,0,1048576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,-2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,51,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Block","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"Reduces your block rating by $s1.","","","","","","","","","","","","","","","",16712190,"Reduces your block rating by $s1.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
INSERT INTO `db_Spell_12340` VALUES (3000056,0,0,0,2214592512,0,0,8388608,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,101,0,0,0,0,21,0,0,0,0,0,1,0,0,999,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,6,0,0,1,0,0,0,0,0,-2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,189,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114688,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"Resilience","","","","","","","","","","","","","","","",16712190,"Wisp of Rain","","","","","","","","","","","","","","","",16712190,"-$s1 Resilience Rating.","","","","","","","","","","","","","","","",16712190,"-$s1 Resilience Rating.","","","","","","","","","","","","","","","",16712190,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0); 
]]
--
-- SPELL.DBC ENDS HERE. PUT INTO PATCH OR ENSURE DB OVERRIDES DBC VIA AZEROTHCORE

WISP_ENTRY = 4000000
WISP_DURATION = 60 -- duration, in seconds that the wisp should be spawned.
VALID_RANGE = 4 -- the level range of which the player can get xp and the "drop"/wisp is considered valid. this is the range that players can still earn xp from mobs.
BUFF_ARRAY = { -- the IDs of "buffs"
3000000,
3000001,
3000002,
3000003,
3000004,
3000005,
3000006,
3000007,
3000008,
3000009,
3000010,
3000012,
3000013,
3000014,
3000016,
3000023,
3000024,
3000025,
3000026,
3000027,
3000028,
3000029,
3000030,
3000031,
}
DEBUFF_ARRAY = { -- IDs of "debuffs"
3000033,
3000034,
3000035,
3000036,
3000037,
3000038,
3000039,
3000040,
3000041,
3000042,
3000043,
3000044,
3000045,
3000046,
3000047,
3000048,
3000049,
3000050,
3000051,
3000052,
3000053,
3000054,
3000055,
3000056,
}
SPELL_ARRAY = { -- IDs of spells the wisp can choose to autocast
3000018,
}
RISK_OF_RAIN = 3000017 -- spellid for the run
RISK_OF_RAIN_MOD_HARDMODE = 3000022
RISK_OF_RAIN_MOD_NODEBUFFS = 3000021
CHANCE_TO_SPAWN_WISP = 1 -- value is 1 / 100
MAX_CHANCE = 100 -- exists so you can change it to 1000 for example, in combo with CHANCE_TO_SPAWN_WISP = 1, the chance would be 1/1000. default: 100
SHIELD_SPELL = 3000020 -- shields the wisp from incoming damage until the first interrupt/stun
LEVEL_TO_SHIELD = 10 -- the minimum level youd like the wisp to be before it begins shielding itself. avoids invulnerable wisps at lvl 1 with no way of solving them. (default: 10)

-- risk of rain run item ideas
-- risk of rain : enemies have a chance to drop a wisp. the wisp will fight back, but will drop abilities on death. abilities have a chance to be negative. -> reward 1 account point
-- risk of rain - wisp buff : the wisp now has a shield and must be interrupted/stunned to do damage to it -> reward 1 account point (requires ror)
-- risk of rain - easy mode : the wisp no longer drops negative counterparts -> reward 1 account point (requires ror)

-- player_event_on_kill_creature. do we spawn wisp?

local function Wisp_IsValid(player, creature)
	local player_level = player:GetLevel()
	local creature_level = creature:GetLevel()
	if math.abs(creature_level - player_level) > VALID_RANGE then -- player:SendBroadcastMessage("out of level range") -- DEBUG
		return false
	end
	return true
end

local function Wisp_DebuffsEnabled(player)
	if player:HasSpell(RISK_OF_RAIN) and player:HasSpell(RISK_OF_RAIN_MOD_NODEBUFFS) == true then
		return false
	elseif player:HasSpell(RISK_OF_RAIN) then
		return true
	else
		return nil -- in case this function is called in a situation where the player does not have ror
	end
end

local function Wisp_HardModeEnabled(player)
	if player:HasSpell(RISK_OF_RAIN) and player:HasSpell(RISK_OF_RAIN_MOD_HARDMODE) == true then
		return true
	elseif player:HasSpell(RISK_OF_RAIN) then
		return false
	else
		return false -- in case this function is called in a situation where the player does not have ror
	end
end

local function RiskOfRain(event, player, creature)
	if creature:GetEntry() == WISP_ENTRY then
		return
	end

	if Wisp_IsValid(player, creature) == false then
		return
	elseif not player:HasSpell(RISK_OF_RAIN) and player:IsInGroup() == false then -- check if player or anyone in player's party has risk of rain buff / run enabled before spawning the wisp. -- player:SendBroadcastMessage("solo, no ror enabled") -- DEBUG
		return
	elseif player:IsInGroup() == true then -- player is in a group, loop through members and see if anyone has ror
		local group = player:GetGroup()
		local group = group:GetMembers()
		local temp_table = {}
		for x=1,#group,1 do
			if group[x]:HasSpell(RISK_OF_RAIN) then
				table.insert(temp_table, group[x])
			end
		end
		if #temp_table <= 0 then -- player:SendBroadcastMessage("no ror enabled in group") -- DEBUG
			return
		end
	end
	
	if math.random(1, MAX_CHANCE) > CHANCE_TO_SPAWN_WISP then -- do a roll to see if we should spawn the wisp now. if 98 > 35 then return because its not a valid roll and out of the range 1-35.
		return
	end
	
	-- player:SendBroadcastMessage("valid") -- DEBUG
	wisp = PerformIngameSpawn(1, WISP_ENTRY, creature:GetMapId(), creature:GetInstanceId(), creature:GetX(), creature:GetY(), creature:GetZ(), creature:GetO(), false, (WISP_DURATION * 1000))
	wisp:SetLevel(creature:GetLevel())
	picked_spell = SPELL_ARRAY[math.random(1, #SPELL_ARRAY)]
	wisp:CastSpell(creature, picked_spell, false)
end

-- WISP FUNCTIONS BELOW
--
local function Wisp_Clear(event, creature, killer) -- on death, clear all events and properly distribute buffs to party members
	creature:RemoveEvents()
	
	local temp_table = {}
	if killer:IsInGroup() == true then
		local group = killer:GetGroup()
		local group = group:GetMembers()
		for x=1,#group,1 do
			table.insert(temp_table, group[x])
		end
	else
		table.insert(temp_table, killer)
	end
	for x=1,#temp_table,1 do
		if temp_table[x]:HasSpell(RISK_OF_RAIN) == true and Wisp_DebuffsEnabled(temp_table[x]) == false and Wisp_IsValid(temp_table[x], creature) then
			temp_table[x]:AddAura(BUFF_ARRAY[math.random(1, #BUFF_ARRAY)], temp_table[x])
		elseif temp_table[x]:HasSpell(RISK_OF_RAIN) == true and Wisp_IsValid(temp_table[x], creature) then
			local roll = math.random(1,2)
			if roll == 1 then
				temp_table[x]:AddAura(BUFF_ARRAY[math.random(1, #BUFF_ARRAY)], temp_table[x])
			else
				temp_table[x]:AddAura(DEBUFF_ARRAY[math.random(1, #DEBUFF_ARRAY)], temp_table[x])
			end
		end
	end
	return
end

local function Wisp_Spam(eventid, delay, repeats, creature) -- create a spell loop
	creature:CastSpell(creature, picked_spell, false)
end

-- spam certain spells when spawned
local function Wisp_Cast(event, creature)
	length_of_spell = creature:GetCurrentSpell(1)
	length_of_spell = length_of_spell:GetCastTime()
	creature:RegisterEvent(Wisp_Spam, length_of_spell, 0) -- spell loop
end

local function Wisp_Damage_Taken(event, creature, attacker, damage) -- on damage taken, if wisp is casting ignore damage. make this hard mode 2? when wisps spawn, interrupt/silence them to do damage.
	if Wisp_HardModeEnabled(attacker) == false and attacker:IsInGroup() == false or creature:GetLevel() < LEVEL_TO_SHIELD or creature:GetCurrentSpell(1) == nil then
		creature:RemoveAura(SHIELD_SPELL, creature)
		return
	end

	local temp_table = {
	attacker,
	}
	if attacker:IsInGroup() then
		local group = attacker:GetGroup()
		local group = group:GetMembers()
		for x=1,#group,1 do
			table.insert(temp_table, group[x])
		end
	end
	
	for y=1,#temp_table,1 do
		if Wisp_HardModeEnabled(temp_table[y]) == true then
			creature:AddAura(SHIELD_SPELL, creature)
		end
	end
	return _, 0
end
--
-- END WISP FUNCTIONS

RegisterCreatureEvent(WISP_ENTRY, 5, Wisp_Cast)
RegisterCreatureEvent(WISP_ENTRY, 4, Wisp_Clear)
RegisterCreatureEvent(WISP_ENTRY, 9, Wisp_Damage_Taken)
RegisterPlayerEvent(7, RiskOfRain)